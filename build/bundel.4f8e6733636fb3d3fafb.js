(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var r=s.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=[{name:"Архыз",link:e.p+"images/arkhyz..jpg"},{name:"Челябинская область",link:e.p+"images/chelyabinsk-oblast..jpg"},{name:"Иваново",link:e.p+"images/ivanovo..jpg"},{name:"Камчатка",link:e.p+"images/kamchatka..jpg"},{name:"Холмогорский район",link:e.p+"images/kholmogorsky-rayon..jpg"},{name:"Байкал",link:e.p+"images/baikal..jpg"}],s={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_invalid",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},r=class{constructor(e,t,s,r){let{link:i,name:n}=e;this._name=n,this._link=i,this._template=t,this._openPopupImage=s,this._set=r}_getTemplateCard(){return this._template.content.querySelector(".card-item").cloneNode(!0)}_handleDelete(){this._newCard.remove()}_handleCheckTodoCard(){this._newCard.querySelector(".card-item__like").classList.toggle("card-item__like_selected")}_setEventListeners(){this._newCard.querySelector(".card-item__trash").addEventListener("click",(()=>this._handleDelete())),this._newCard.querySelector(".card-item__like").addEventListener("click",(()=>this._handleCheckTodoCard())),this._newCard.querySelector(".card-item__image").addEventListener("click",(()=>{this._openPopupImage(this._title,this._link)}))}_setData(){this._newCard.querySelector(".card-item__title").textContent=this._name;const e=this._newCard.querySelector(".card-item__image");e.src=this._link,e.alt=this._name}getView(){return this._newCard=this._getTemplateCard(),this._setEventListeners(),this._setData(),this._newCard}},i=class{constructor(e,t){this._config=e,this._formElement=t,this._saveButton=this._formElement.querySelector(this._config.submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector))}_showInputEror=e=>{this._errorElement=this._formElement.querySelector(`.${e.id}-error`),this._errorElement.classList.add(this._config.errorClass),this._errorElement.textContent=e.validationMessage,e.classList.add(this._config.inputErrorClass)};_hideInputEror=e=>{this._errorElement=this._formElement.querySelector(`.${e.id}-error`),this._errorElement.classList.remove(this._config.errorClass),this._errorElement.textContent="",e.classList.remove(this._config.inputErrorClass)};_checkInputValidity=e=>{e.validity.valid?this._hideInputEror(e):this._showInputEror(e)};_hasInvalidInput=e=>e.some((e=>!e.validity.valid));disableSubmitButton(){this._saveButton.classList.add(this._config.inactiveButtonClass),this._saveButton.setAttribute("disabled","disabled")}_deleteDisableButton(){this._formElement.querySelector(this._config.submitButtonSelector).classList.remove(this._config.inactiveButtonClass),this._formElement.querySelector(this._config.submitButtonSelector).removeAttribute("disabled")}_toggleButtonState=e=>{this._hasInvalidInput(e)?this.disableSubmitButton():this._deleteDisableButton()};_setEventListeners=()=>{this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList)}))}))};enableValidation(){this._setEventListeners()}},n=class{constructor(e){this._selector=document.querySelector(e),this._popupList=document.querySelectorAll(".popup")}_handleEscClose(){console.log(),document.addEventListener("keydown",(e=>{if("Escape"===e.key){const e=document.querySelector(".popup_opened");this.close(e)}}))}setEventListeners(){this._selector.addEventListener("click",(e=>{const t=e.target.classList;(t.contains("popup")||t.contains("popup__close"))&&this.close()}))}open(){this._selector.classList.add("popup_opened"),this._handleEscClose()}close(){this._selector.classList.remove("popup_opened")}},o=class extends n{constructor(e){let{selector:t,handleFormSubmit:s}=e;super(t),this._handleFormSubmit=s,this._form=this._selector.querySelector(".popup__form"),this._inputList=this._form.querySelectorAll(".popup__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}},a=document.querySelector(".popup_edit-profile"),l=document.querySelector(".popup__input_type_name"),c=document.querySelector(".popup__input_type_about"),u=document.querySelector(".profile__edite"),_=document.querySelector("#card-item__template"),p=document.querySelector(".popup_card-form"),h=document.querySelector(".profile__add"),d=new class extends n{constructor(e){super(e),this._popup=document.querySelector(e),this._img=this._popup.querySelector(".popup__img"),this._tag=this._popup.querySelector(".popup__tag")}setEventListeners(){super.setEventListeners()}open(e,t){super.open(),this._img.src=t,this._img.alt=e,this._tag.textContent=e}}(".popup_img-zoom"),m=new class{constructor(e,t){let{items:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.append(e)}}({items:t,renderer:e=>{const t=new r(e,_,(()=>d.open(e.title,e.link))).getView();m.addItem(t)}},".cards");m.renderItems();const g=new class{constructor(e){let{userName:t,userAbout:s}=e;this._userName=document.querySelector(t),this._userAbout=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,about:this._userAbout.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._userName.textContent=t,this._userAbout.textContent=s}}({userName:".profile__name",userAbout:".profile__about"});u.addEventListener("click",(()=>{l.value=g.getUserInfo().name,c.value=g.getUserInfo().about,S.open()})),h.addEventListener("click",(()=>{f.open()}));const v=function(){let{place:e,link:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:data,s=arguments.length>1?arguments[1]:void 0;return console.log(e,t),new r({place:e,link:t},s,(()=>d.open(e,t))).getView()},f=new o({selector:".popup_card-form",handleFormSubmit:e=>{m.addItem(v(e,_))}}),S=new o({selector:".popup_edit-profile",handleFormSubmit:e=>{const{name:t,about:s}=e;g.setUserInfo({name:t,about:s}),S.close()}});S.setEventListeners(),f.setEventListeners(),d.setEventListeners(),new i(s,a).enableValidation(),new i(s,p).enableValidation()})();